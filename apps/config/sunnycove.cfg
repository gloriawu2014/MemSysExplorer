# ============================
# Intel Rocket Lake (Cypress Cove)
# ============================

[general]
enable_icache_modeling = false
total_cores = 8

[perf_model/core]
logical_cpus = 1
type = rob
core_model = nehalem
frequency = 2.20

[perf_model/core/interval_timer]
# Rocket Lake backend is wider and deeper; keep dispatch similar unless later tune interval widths
dispatch_width = 5
# Map ROB size here (Cypress Cove ROB ≈ 352 entries)
window_size = 352
num_outstanding_loadstores = 10

[perf_model/sync]
reschedule_cost = 1000

[caching_protocol]
type = parametric_dram_directory_msi

[perf_model/branch_predictor]
type = pentium_m
mispredict_penalty = 8

[perf_model/tlb]
penalty = 30

[perf_model/itlb]
size = 128
associativity = 8

[perf_model/dtlb]
size = 64
associativity = 4

[perf_model/stlb]
size = 1536
associativity = 12

[perf_model/cache]
levels = 3

# -------- L1I --------
[perf_model/l1_icache]
perfect = false
passthrough = false
coherent = true
cache_block_size = 64
cache_size = 32          # KB (same as Skylake)
associativity = 8
address_hash = mask
replacement_policy = lru
data_access_time = 4     # ≈4+1 tags -> ~5 cyc total
tags_access_time = 1
perf_model_type = parallel
writethrough = 0
writeback_time = 0
dvfs_domain = core
shared_cores = 1
next_level_read_bandwidth = 0
prefetcher = none

# -------- L1D (Rocket Lake change) --------
[perf_model/l1_dcache]
perfect = false
passthrough = false
cache_block_size = 64
cache_size = 48          # KB (Cypress Cove)
associativity = 12       # (Cypress Cove)
address_hash = mask
replacement_policy = lru
data_access_time = 4     # ≈4+1 tags -> ~5 cyc load-to-use
tags_access_time = 1
perf_model_type = parallel
writeback_time = 0
writethrough = 0
dvfs_domain = core
shared_cores = 1
outstanding_misses = 0
next_level_read_bandwidth = 0
prefetcher = none

# -------- L2 (Rocket Lake change) --------
[perf_model/l2_cache]
perfect = false
passthrough = false
cache_block_size = 64
cache_size = 512         # KB per core
associativity = 8
address_hash = mask
replacement_policy = lru
data_access_time = 10    # 10 + 3 tags ≈ 13 cyc total (RKL ≈ L1 + ~8)
tags_access_time = 3
perf_model_type = parallel
writethrough = 0
writeback_time = 0
dvfs_domain = core
shared_cores = 1
prefetcher = none
next_level_read_bandwidth = 0

# -------- L3 (shared ring) --------
[perf_model/l3_cache]
perfect = false
cache_block_size = 64
cache_size = 16384       # 2 MB/core x 8 cores = 16 MB total
associativity = 16
address_hash = mask
replacement_policy = lru
data_access_time = 36    # 36 + 2 tags ≈ 38 cyc (reasonable RKL starting point)
tags_access_time = 2
perf_model_type = parallel
writethrough = 0
shared_cores = 2
dvfs_domain = global
prefetcher = none
writeback_time = 0

trace_enabled = true
trace_file = L3_trace.out          # Optional, defaults to "dram_trace.out"
trace_buffer_size = 1024


[perf_model/dram_directory]
total_entries = 1048576
associativity = 16
directory_type = full_map

# -------- DRAM (Rocket Lake / DDR4-3200) --------
[perf_model/dram]
num_controllers = 2
controllers_interleaving = 4
latency = 90                       # ns (keep “similar” to baseline)
per_controller_bandwidth = 25.6    # GB/s each @ DDR4-3200 → ~51.2 GB/s total
chips_per_dimm = 8
dimms_per_controller = 4

[network]
memory_model_1 = bus
memory_model_2 = bus

[network/bus]
bandwidth = 25.6
ignore_local_traffic = true

[clock_skew_minimization]
scheme = barrier

[clock_skew_minimization/barrier]
quantum = 100

[dvfs]
transition_latency = 2000

[dvfs/simple]
cores_per_socket = 1

[power]
vdd = 1.2
technology_node = 14

# -------- ROB/queues tuning (Rocket Lake aware) --------
[perf_model/core/rob_timer]
in_order = false
issue_contention = true
mlp_histogram = false
issue_memops_at_issue = true
# Cypress Cove has large queues; you can keep your prior values or bump slightly if desired
outstanding_loads = 72
outstanding_stores = 56
store_to_load_forwarding = true
address_disambiguation = true
rob_repartition = true
simultaneous_issue = true
commit_width = 128
rs_entries = 64
